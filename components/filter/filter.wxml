<!--components/filter/filter.wxml-->
<view class="filter-container {{position}}" wx:if="{{show}}">
  <!-- 遮罩层 -->
  <view class="filter-mask" wx:if="{{showMask}}" bindtap="onMaskTap"></view>
  
  <!-- 筛选面板 -->
  <view class="filter-panel {{position}} {{theme}}">
    <!-- 头部 -->
    <view class="filter-header" wx:if="{{showHeader}}">
      <text class="filter-title">{{title}}</text>
      <view class="filter-actions">
        <text class="filter-reset" bindtap="onReset">重置</text>
        <text class="filter-confirm" bindtap="onConfirm">确定</text>
      </view>
    </view>
    
    <!-- 筛选内容 -->
    <scroll-view class="filter-content" scroll-y="{{scrollable}}">
      <!-- 分类筛选 -->
      <view class="filter-section" wx:if="{{categories.length > 0}}">
        <text class="section-title">菜系分类</text>
        <view class="filter-tags">
          <text 
            class="filter-tag {{item.selected ? 'selected' : ''}}"
            wx:for="{{categories}}"
            wx:key="id"
            data-type="category"
            data-id="{{item.id}}"
            bindtap="onTagTap"
          >
            {{item.name}}
          </text>
        </view>
      </view>
      
      <!-- 难度筛选 -->
      <view class="filter-section" wx:if="{{difficulties.length > 0}}">
        <text class="section-title">制作难度</text>
        <view class="filter-tags">
          <text 
            class="filter-tag {{item.selected ? 'selected' : ''}}"
            wx:for="{{difficulties}}"
            wx:key="id"
            data-type="difficulty"
            data-id="{{item.id}}"
            bindtap="onTagTap"
          >
            {{item.name}}
          </text>
        </view>
      </view>
      
      <!-- 时间筛选 -->
      <view class="filter-section" wx:if="{{times.length > 0}}">
        <text class="section-title">制作时间</text>
        <view class="filter-tags">
          <text 
            class="filter-tag {{item.selected ? 'selected' : ''}}"
            wx:for="{{times}}"
            wx:key="id"
            data-type="time"
            data-id="{{item.id}}"
            bindtap="onTagTap"
          >
            {{item.name}}
          </text>
        </view>
      </view>
      
      <!-- 口味筛选 -->
      <view class="filter-section" wx:if="{{tastes.length > 0}}">
        <text class="section-title">口味偏好</text>
        <view class="filter-tags">
          <text 
            class="filter-tag {{item.selected ? 'selected' : ''}}"
            wx:for="{{tastes}}"
            wx:key="id"
            data-type="taste"
            data-id="{{item.id}}"
            bindtap="onTagTap"
          >
            {{item.name}}
          </text>
        </view>
      </view>
      
      <!-- 自定义筛选项 -->
      <view class="filter-section" wx:for="{{customFilters}}" wx:key="key" wx:for-item="section">
        <text class="section-title">{{section.title}}</text>
        <view class="filter-tags">
          <text 
            class="filter-tag {{item.selected ? 'selected' : ''}}"
            wx:for="{{section.options}}"
            wx:key="id"
            data-type="{{section.key}}"
            data-id="{{item.id}}"
            bindtap="onTagTap"
          >
            {{item.name}}
          </text>
        </view>
      </view>
    </scroll-view>
    
    <!-- 底部操作栏（仅在底部弹出时显示） -->
    <view class="filter-footer" wx:if="{{position === 'bottom' && showFooter}}">
      <button class="footer-btn reset-btn" bindtap="onReset">重置</button>
      <button class="footer-btn confirm-btn" bindtap="onConfirm">确定({{selectedCount}})</button>
    </view>
  </view>
</view>